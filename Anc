<?php get_header(); ?>

<div class="archive-wrapper">
    <div class="container">
        <div class="archive-header">
            <?php get_template_part('template-parts/breadcrumb'); ?>
            <h1 class="archive-title"><?php the_archive_title(); ?></h1>
        </div>

        <div class="row">
            <!-- Main content -->
            <div class="col-lg-8 col-md-12">
                <div class="featured-posts row">
                    <?php
                    $first_query = new WP_Query([
                        'post_type' => 'post',
                        'posts_per_page' => 4
                    ]);

                    if ($first_query->have_posts()) :
                        $count = 0;
                        while ($first_query->have_posts()) : $first_query->the_post();
                            if ($count === 0): ?>
                                <div class="col-lg-6">
                                    <div class="post-item-large">
                                        <div class="post-thumbnail">
                                            <a href="<?php the_permalink(); ?>">
                                                <?php the_post_thumbnail('large'); ?>
                                            </a>
                                        </div>
                                        <div class="post-content">
                                            <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                                        </div>
                                    </div>
                                </div>
                            <?php else: ?>
                                <?php if ($count === 1): ?><div class="col-lg-6"><div class="post-list-small"><?php endif; ?>
                                    <div class="post-item-small">
                                        <div class="post-thumbnail">
                                            <a href="<?php the_permalink(); ?>">
                                                <?php the_post_thumbnail('thumbnail'); ?>
                                            </a>
                                        </div>
                                        <div class="post-content">
                                            <h5><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h5>
                                        </div>
                                    </div>
                                <?php if ($count === 3): ?></div></div><?php endif; ?>
                            <?php endif;
                            $count++;
                        endwhile;
                        wp_reset_postdata();
                    endif;
                    ?>
                </div>

                <!-- Remaining posts -->
                <div class="post-list-vertical">
                    <?php
                    $paged = get_query_var('paged') ? get_query_var('paged') : 1;
                    $main_query = new WP_Query([
                        'post_type' => 'post',
                        'posts_per_page' => 10,
                        'paged' => $paged,
                        'offset' => 4
                    ]);

                    if ($main_query->have_posts()) :
                        while ($main_query->have_posts()) : $main_query->the_post(); ?>
                            <div class="post-item-vertical row">
                                <div class="col-md-4"><?php the_post_thumbnail('medium'); ?></div>
                                <div class="col-md-8">
                                    <h5><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h5>
                                    <p><?php echo wp_trim_words(get_the_excerpt(), 25); ?></p>
                                </div>
                            </div>
                        <?php endwhile;

                        the_posts_pagination([
                            'prev_text' => '« Trước',
                            'next_text' => 'Tiếp »',
                            'mid_size' => 2
                        ]);
                    endif;
                    wp_reset_postdata();
                    ?>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4 col-md-12">
                <?php get_sidebar(); ?>
            </div>
        </div>
    </div>
</div>

<!-- Style -->
<style>
.archive-wrapper {
    padding: 40px 0;
    background: #f8f8f8;
}
.archive-title {
    font-size: 32px;
    font-weight: bold;
    margin-bottom: 30px;
}

.featured-posts {
    margin-bottom: 30px;
}
.post-item-large img,
.post-item-small img,
.post-item-vertical img {
    width: 100%;
    height: auto;
    border-radius: 8px;
}
.post-item-large h2,
.post-item-small h5,
.post-item-vertical h5 {
    font-weight: bold;
    margin-top: 10px;
}
.post-list-small {
    display: flex;
    flex-direction: column;
    gap: 15px;
}
.post-item-small {
    display: flex;
    gap: 10px;
}
.post-item-vertical {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}
</style>

<?php get_footer(); ?>
