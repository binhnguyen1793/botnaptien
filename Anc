<?php get_header(); ?>

<div class="container my-5">
    <h2 class="section-title">Tin tức</h2>
    <div class="row">
        <!-- Content chính -->
        <div class="col-lg-8">
            <div class="row g-4">

                <!-- Bài lớn -->
                <div class="col-lg-8">
                    <?php
                    $first_query = new WP_Query([
                        'posts_per_page' => 1,
                    ]);
                    if ($first_query->have_posts()) :
                        while ($first_query->have_posts()) : $first_query->the_post(); ?>
                            <div class="featured-article">
                                <a href="<?php the_permalink(); ?>">
                                    <?php the_post_thumbnail('large', ['class' => 'img-fluid rounded mb-3']); ?>
                                    <h3 class="text-primary fw-bold"><?php the_title(); ?></h3>
                                </a>
                            </div>
                        <?php endwhile;
                        wp_reset_postdata();
                    endif;
                    ?>
                </div>

                <!-- 4 bài nhỏ bên phải -->
                <div class="col-lg-4 d-flex flex-column gap-2">
                    <?php
                    $small_posts = new WP_Query([
                        'posts_per_page' => 4,
                        'offset' => 1,
                    ]);
                    if ($small_posts->have_posts()) :
                        while ($small_posts->have_posts()) : $small_posts->the_post(); ?>
                            <a href="<?php the_permalink(); ?>" class="text-dark small-post-link fw-semibold">
                                <?php the_title(); ?>
                            </a>
                        <?php endwhile;
                        wp_reset_postdata();
                    endif;
                    ?>
                </div>

                <!-- 3 bài ngang dưới -->
                <div class="col-12 d-flex flex-column gap-4 mt-4">
                    <?php
                    $more_posts = new WP_Query([
                        'posts_per_page' => 3,
                        'offset' => 5,
                    ]);
                    if ($more_posts->have_posts()) :
                        while ($more_posts->have_posts()) : $more_posts->the_post(); ?>
                            <div class="row g-3 border p-3 rounded shadow-sm">
                                <div class="col-md-4">
                                    <a href="<?php the_permalink(); ?>">
                                        <?php the_post_thumbnail('medium', ['class' => 'img-fluid rounded']); ?>
                                    </a>
                                </div>
                                <div class="col-md-8">
                                    <h5 class="fw-semibold">
                                        <a href="<?php the_permalink(); ?>" class="text-dark"><?php the_title(); ?></a>
                                    </h5>
                                    <p class="text-muted mb-0"><?php echo wp_trim_words(get_the_excerpt(), 25); ?></p>
                                </div>
                            </div>
                        <?php endwhile;
                        wp_reset_postdata();
                    endif;
                    ?>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-lg-4 mt-4 mt-lg-0">
            <!-- Tin mới nhất -->
            <h5 class="mb-3">Tin mới nhất <a href="#" class="float-end small">Xem thêm »</a></h5>
            <?php
            $recent_posts = new WP_Query([
                'posts_per_page' => 6,
            ]);
            if ($recent_posts->have_posts()) :
                while ($recent_posts->have_posts()) : $recent_posts->the_post(); ?>
                    <div class="d-flex gap-2 mb-3">
                        <a href="<?php the_permalink(); ?>" class="flex-shrink-0">
                            <?php the_post_thumbnail('thumbnail', ['class' => 'rounded', 'style' => 'width:70px;height:50px;object-fit:cover;']); ?>
                        </a>
                        <div>
                            <a href="<?php the_permalink(); ?>" class="text-dark small fw-semibold"><?php the_title(); ?></a>
                        </div>
                    </div>
                <?php endwhile;
                wp_reset_postdata();
            endif;
            ?>

            <!-- Tỉnh thành nhiều tin -->
            <h5 class="mt-4 mb-3">Tỉnh thành có nhiều tin đăng nhất</h5>
            <div class="d-flex flex-wrap gap-3">
                <!-- Replace by actual taxonomy/term loop if needed -->
                <div class="text-center">
                    <img src="https://via.placeholder.com/80x50" class="rounded mb-1">
                    <div class="small">Hà Nội</div>
                </div>
                <div class="text-center">
                    <img src="https://via.placeholder.com/80x50" class="rounded mb-1">
                    <div class="small">TP HCM</div>
                </div>
                <!-- Add more -->
            </div>
        </div>
    </div>
</div>

<style>
.section-title {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 20px;
}
.small-post-link {
    font-size: 14px;
    color: #0073aa;
    text-decoration: none;
}
.small-post-link:hover {
    text-decoration: underline;
}
</style>

<?php get_footer(); ?>
